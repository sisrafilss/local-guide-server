model User {
  id            String     @id @default(uuid())
  email         String     @unique
  password      String
  name          String
  profilePicUrl String?
  bio           String?
  role          UserRole   @default(TOURIST)
  status        UserStatus @default(ACTIVE)

  // relations
  guide   Guide?
  tourist Tourist?
  admin   Admin?

  reviews Review[]
  // listings Listing[]
  // bookings Booking[]

  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  listings  Listing[]
  bookings  Booking[]

  @@map("users")
}

model Guide {
  id                 String    @id @default(uuid())
  user               User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId             String    @unique
  expertise          String[]  @default([]) // free array of expertise tags e.g. ["History","Nightlife"]
  dailyRate          Decimal   @db.Decimal(10, 2) // price per day
  verificationStatus Boolean   @default(false)
  createdAt          DateTime  @default(now())
  updatedAt          DateTime  @updatedAt
  bookings           Booking[]
  listings           Listing[]

  @@map("guides")
}

model Admin {
  id        String   @id @default(uuid())
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId    String   @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("admins")
}

model Tourist {
  id          String    @id @default(uuid())
  user        User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId      String    @unique
  preferences String? // JSON or text describing travel prefs
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  bookings    Booking[]

  @@map("tourists")
}
